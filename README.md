# Руководство для пользователей игры "Консольный лабиринт"
## Назначение программы 
«Консольный лабиринт» — это консольная двухпользовательская игра, в которой игроки соревнуются друг с другом за выход из лабиринта. Лабиринт генерируется случайным образом, а игрокам предстоит избегать столкновения с мобами, собирать ключи для открытия дверей и алмазы, которые увеличивают количество очков. Цель игры – первым добраться до выхода, преодолевая лабиринт, уклоняясь от опасностей и собирая предметы. 
## Функционал игры 
В процессе игры реализованы следующие ключевые функции:
### 1. Генерация лабиринта
• Лабиринт генерируется случайным образом для каждого уровня.

• Для уровня 1 создается лабиринт размером 15x10 с 2 мобами.

• Для уровня 2 создается лабиринт размером 20x15 с 4 мобами.

• Для уровня 3 создается лабиринт размером 30x20 с 6 мобами.

• Лабиринт состоит из стен (обозначены как █), проходов (обозначены как пробелы), точек старта (S), выхода (E), ключей (K), дверей (░), алмазов (◇) и мобов (M).
### 2. Игроки и управление
• В игре участвуют два игрока, каждый из которых управляет своим персонажем.

• Игроки не могут перемещаться в одну и ту же клетку. Если в клетке находится другой игрок, он становится препятствием для перемещения, и второй игрок не может в нее зайти. 

• Игроки перемещаются по лабиринту с помощью клавиш WASD:
```

    • W — движение вверх

    • A — движение влево

    • S — движение вниз

    • D — движение вправо
```
• Передвижение персонажа ограничено границами лабиринта, и игроки могут двигаться только в пределах открытых путей.

• Игроки начинают игру с 3 жизнями. 
### 3. Двери и ключи
• Двери закрыты до тех пор, пока игрок не соберет ключ. Ключи случайным образом размещаются в лабиринте.

• После сбора ключа, игрок может открыть дверь, используя команду движения на клетку с дверью, при этом ключ будет потрачен.
### 4. Алмазы
• Алмазы случайным образом размещаются в лабиринте.

• Алмазы не влияют на игровой процесс, но каждый собранный алмаз увеличивает счет игрока. 
### 5. Мобы
• Мобы случайным образом генерируются в лабиринте в зависимости от уровня.

• Если игрок сталкивается с мобом, он теряет одну жизнь и отправляется в стартовую позицию. Если у игрока заканчиваются жизни, он проигрывает.

• Мобы двигаются по лабиринту, меняя направление, если сталкиваются со стеной.
### 6. Победа и конец игры
• Игра заканчивается, когда один из игроков выходит из лабиринта или у игрока заканчиваются жизни.

• После завершения игры, выводится сообщение о победе.
### Дополнительно
• Игра поддерживает многопользовательский режим, где два игрока могут подключаться к серверу и соревноваться друг с другом в реальном времени.
## Требования для установки  
• Операционная система: Windows, macOS, Linux.

• Установленный Python версии 3.7 или выше.
## Установка игры 
1. Клонировать репозиторий:

```
git clone https://github.com/anastimaa/consolemaze.git
```

2. Перейти в каталог проекта:

```
cd consolemaze
```

3. Установить зависимости:

```
pip install -r requirements.txt
```

## Основные сценарии использования 
### 1. Запуск сервера 
Сервер управляет всей логикой игры, включая генерацию лабиринта, перемещение игроков, мобов и обработку состояния игры.
#### Запуск 
Запустите сервер:
```
python server.py
```
#### Вывод
Сервер выведет сообщение:
```
Server listening on <IP_address>:<port_number>
```
После подключение игроков сервер начнет игру, а лабиринт будет автоматически сгенерирован.
### 2. Запуск клиента 
Клиенты подключаются к серверу и управляют своими игроками. Каждый клиент отображает текущее состояние лабиринта и передает ходы на сервер.
#### Запуск 
Запустите клиент:
```
python client.py
```
#### Вывод
Клиент предложит меню:
```
--- Menu ---
 N) Create new game
 J) Join existing game

    Insert command (N/J):
```
• N: Создать новую игру. Введите уровень сложности: 1, 2 или 3.

• J: Присоединиться к существующей игре. Введите код игры, который обображается у другого игрока.
##### Пример:
```
--- Menu ---
 N) Create new game
 J) Join existing game

    Insert command (N/J): N

    Insert level game (1,2,3): 1
```
После начала игры используйте клавиши WASD для перемещения:
```
    • W — движение вверх

    • A — движение влево

    • S — движение вниз

    • D — движение вправо
```
Нажмите ```Q``` для выхода.
##### Пример кода для перемещения:
```
press = get_char()
if press in [b'a', b'A']:
    s.sendall(pickle.dumps("left"))
elif press in [b'd', b'D']:
    s.sendall(pickle.dumps("right"))
elif press in [b'w', b'W']:
    s.sendall(pickle.dumps("up"))
elif press in [b's', b'S']:
    s.sendall(pickle.dumps("down"))
elif press.lower() == b"q":
    print("Quitting game.")
```
### 3. Обработка взаимодействий игроков с объектами 
#### Столкновение с мобом 
Столкновение с мобом (M) отнимает жизнь. Если жизни закончились, игрок проигрывает:
```
if game_state["maze"][new_y][new_x] == "M":
    player["lives"] -= 1  
    print(f"Player {player_id} hit a mob! Lives left: {player['lives']}")
```
```
if player["lives"] == 0:
    print(f"Player {player_id} lost! The other player is winner!")
```
Также столкновение с мобом отбрасывает игрока в начальную точку:
```
game_state["maze"][current_y][current_x] = " "
player["x"], player["y"] = 1, 1
new_y, new_x = 1, 1
```
#### Сбор ключа
Если игрок переходит на клетку с ключом (K), счетчик ключей увеличивается:
```
if game_state["maze"][new_y][new_x] == "K":
    player["keys"] += 1
    print(f"Player {player_id} picked up a key! Total keys: {player['keys']}")
```
#### Сбор алмаза 
Собирайте алмазы (◇) для увеличения очков:
```
if game_state["maze"][new_y][new_x] == "\u25C7":
    player["gems"] += 1
    print(f"Player {player_id} picked up a gem!!!! Total gems: {player['gems']}")
```
#### Открытие двери
Игрок может открыть дверь (░), если у него есть ключ:
```
if game_state["maze"][y][x] == "\u2591" and game_state["players"][player_id]["keys"] > 0:
    game_state["players"][player_id]["keys"] -= 1
    game_state["message"] = f"!Player {player_id} open the door!"
```
### 4. Завершение игры 
#### Победа
Игрок выигрывает, если достигает выхода (E):
```
if game_state["maze"][new_y][new_x] != "E":
    game_state["maze"][new_y][new_x]= str(player_id)
else:
    print(f"Player {player_id} has exited the maze! Game over!")
```
#### Проигрыш
Игрок проигрывает, если его жизни достигают 0:
```
if player["lives"] == 0:
    print(f"Player {player_id} lost! The other player is winner!")
```
## Скриншоты
 
